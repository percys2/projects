{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/percyscastillo/Desktop/proyectos%20coding/agro-erp-production-2/src/modules/POS/utils/formatCurrency.js"],"sourcesContent":["export const formatCurrency = (n) =>\n  \"C$ \" +\n  n.toLocaleString(\"es-NI\", {\n    minimumFractionDigits: 2,\n  });\n"],"names":[],"mappings":";;;;AAAO,MAAM,iBAAiB,CAAC,IAC7B,QACA,EAAE,cAAc,CAAC,SAAS;QACxB,uBAAuB;IACzB"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/percyscastillo/Desktop/proyectos%20coding/agro-erp-production-2/src/modules/kardex/kardexTable.jsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { format } from \"date-fns\";\nimport { es } from \"date-fns/locale\";\nimport { formatCurrency } from \"../POS/utils/formatCurrency\";\n\nexport default function KardexTable({\n  data = [],\n  page,\n  setPage,\n  limit,\n  product,\n  onPrint,\n  onExportExcel,\n}) {\n  const totals = data.reduce(\n    (acc, m) => {\n      const qty = Number(m.qty || m.quantity || 0);\n      const cost = Number(m.cost_unit || m.cost || 0);\n      const totalCost = Number(m.total_cost || m.total || qty * cost);\n\n      const type = m.movement_type;\n\n      if (type === \"entrada\") {\n        acc.entradas += qty;\n        acc.costoEntradas += totalCost;\n      }\n      if (type === \"salida\") {\n        acc.salidas += qty;\n        acc.costoSalidas += totalCost;\n      }\n\n      return acc;\n    },\n    { entradas: 0, salidas: 0, costoEntradas: 0, costoSalidas: 0 }\n  );\n\n  const typeColors = {\n    entrada: \"text-green-600 font-semibold\",\n    salida: \"text-red-600 font-semibold\",\n    transferencia: \"text-blue-600 font-semibold\",\n    venta: \"text-orange-600 font-semibold\",\n    ajuste: \"text-gray-700 font-semibold\",\n  };\n\n  return (\n    <div className=\"space-y-4\">\n\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <h3 className=\"text-base font-bold\">\n          Kardex â€” {product?.name || \"Todos los productos\"}\n        </h3>\n\n        <div className=\"flex gap-2\">\n          <button\n            onClick={onPrint}\n            className=\"bg-slate-900 text-white px-4 py-2 rounded-lg text-xs hover:bg-slate-800\"\n          >\n            ðŸ–¨ Imprimir\n          </button>\n\n          <button\n            onClick={onExportExcel}\n            className=\"bg-green-600 text-white px-4 py-2 rounded-lg text-xs hover:bg-green-700\"\n          >\n            ðŸ“Š Excel\n          </button>\n        </div>\n      </div>\n\n      {/* Totales */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm\">\n        <div className=\"p-3 bg-green-50 border border-green-200 rounded-lg\">\n          <p className=\"text-[11px] text-green-700 uppercase\">Entradas</p>\n          <p className=\"text-green-900 font-bold\">{totals.entradas}</p>\n        </div>\n\n        <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n          <p className=\"text-[11px] text-red-700 uppercase\">Salidas</p>\n          <p className=\"text-red-900 font-bold\">{totals.salidas}</p>\n        </div>\n\n        <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n          <p className=\"text-[11px] text-blue-700 uppercase\">Costo Entradas</p>\n          <p className=\"text-blue-900 font-bold\">\n            {formatCurrency(totals.costoEntradas)}\n          </p>\n        </div>\n\n        <div className=\"p-3 bg-gray-50 border border-gray-200 rounded-lg\">\n          <p className=\"text-[11px] text-gray-700 uppercase\">Balance</p>\n          <p className=\"text-gray-900 font-bold\">\n            {totals.entradas - totals.salidas}\n          </p>\n        </div>\n      </div>\n\n      {/* Tabla */}\n      <div className=\"overflow-auto border rounded-xl bg-white\">\n        <table className=\"w-full text-xs\">\n          <thead className=\"bg-slate-100 text-slate-600 uppercase\">\n            <tr>\n              <th className=\"p-2 text-left\">Fecha</th>\n              <th className=\"p-2 text-left\">Movimiento</th>\n              <th className=\"p-2 text-left\">Producto</th>\n              <th className=\"p-2 text-left\">Cantidad</th>\n              <th className=\"p-2 text-left\">Costo</th>\n              <th className=\"p-2 text-left\">Total</th>\n              <th className=\"p-2 text-left\">Sucursal Origen</th>\n              <th className=\"p-2 text-left\">Sucursal Destino</th>\n              <th className=\"p-2 text-left\">Referencia</th>\n              <th className=\"p-2 text-left\">Usuario</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {data.length === 0 && (\n              <tr>\n                <td colSpan=\"10\" className=\"p-4 text-center text-slate-400\">\n                  No hay movimientos.\n                </td>\n              </tr>\n            )}\n\n            {data.map((m) => {\n              const qty = Number(m.qty || m.quantity || 0);\n              const cost = Number(m.cost_unit || m.cost || 0);\n              const total = Number(m.total_cost || m.total || qty * cost);\n\n              return (\n                <tr key={m.id} className=\"border-b last:border-none\">\n                  <td className=\"p-2\">\n                    {format(new Date(m.created_at), \"dd/MM/yyyy HH:mm\", {\n                      locale: es,\n                    })}\n                  </td>\n\n                  <td className={`p-2 ${typeColors[m.movement_type] || \"\"}`}>\n                    {m.movement_type?.toUpperCase()}\n                  </td>\n\n                  <td className=\"p-2\">{m.product_name || \"-\"}</td>\n\n                  <td className=\"p-2 font-semibold\">{qty}</td>\n\n                  <td className=\"p-2\">{formatCurrency(cost)}</td>\n\n                  <td className=\"p-2\">{formatCurrency(total)}</td>\n\n                  <td className=\"p-2\">{m.from_branch_name || \"-\"}</td>\n\n                  <td className=\"p-2\">{m.to_branch_name || \"-\"}</td>\n\n                  <td className=\"p-2 text-slate-500\">{m.notes || \"-\"}</td>\n\n                  <td className=\"p-2 text-slate-700\">\n                    {m.user_full_name || m.user_email || \"-\"}\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n\n      {/* PaginaciÃ³n */}\n      <div className=\"flex justify-between items-center pt-4\">\n        <button\n          onClick={() => setPage((p) => Math.max(p - 1, 0))}\n          disabled={page === 0}\n          className={`px-3 py-1 text-xs rounded-lg border ${\n            page === 0\n              ? \"bg-gray-200 text-gray-400 cursor-not-allowed\"\n              : \"bg-white hover:bg-slate-100\"\n          }`}\n        >\n          â¬… Anterior\n        </button>\n\n        <p className=\"text-xs text-slate-500\">PÃ¡gina {page + 1}</p>\n\n        <button\n          onClick={() => setPage((p) => p + 1)}\n          disabled={data.length < limit}\n          className={`px-3 py-1 text-xs rounded-lg border ${\n            data.length < limit\n              ? \"bg-gray-200 text-gray-400 cursor-not-allowed\"\n              : \"bg-white hover:bg-slate-100\"\n          }`}\n        >\n          Siguiente âž¡\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 507, "column": 0}, "map": {"version":3,"sources":["file:///Users/percyscastillo/Desktop/proyectos%20coding/agro-erp-production-2/src/modules/kardex/utils/exportKardexPDF.js"],"sourcesContent":["// ================================\n//  exportKardexPDF.js (COMPLETO)\n//  Kardex ERP â€“ Sin errores\n// ================================\n\nimport jsPDF from \"jspdf\";\nimport autoTable from \"jspdf-autotable\";\nimport { format } from \"date-fns\";\nimport { es } from \"date-fns/locale\";\n\nexport function exportKardexPDF({\n  org,\n  product,\n  branch,\n  movements,\n  dateStart,\n  dateEnd,\n  userName = \"Sistema\",\n}) {\n  const doc = new jsPDF({\n    orientation: \"portrait\",\n    unit: \"pt\",\n    format: \"A4\",\n  });\n\n  // =======================================\n  //  ENCABEZADO DE EMPRESA\n  // =======================================\n  doc.setFont(\"Helvetica\", \"bold\");\n  doc.setFontSize(16);\n  doc.text(org?.name?.toUpperCase() || \"EMPRESA\", 40, 40);\n\n  doc.setFont(\"Helvetica\", \"normal\");\n  doc.setFontSize(10);\n  if (org?.ruc) doc.text(`RUC: ${org.ruc}`, 40, 60);\n  if (org?.address) doc.text(`DirecciÃ³n: ${org.address}`, 40, 75);\n  if (org?.phone) doc.text(`Tel: ${org.phone}`, 40, 90);\n\n  // LOGO (opcional)\n  if (org?.logo_url) {\n    try {\n      doc.addImage(org.logo_url, \"PNG\", 400, 25, 140, 60);\n    } catch (err) {\n      console.log(\"Error agregando logo:\", err);\n    }\n  }\n\n  // =======================================\n  //  INFORMACIÃ“N GENERAL DEL REPORTE\n  // =======================================\n  doc.setFont(\"Helvetica\", \"bold\");\n  doc.setFontSize(14);\n  doc.text(\"REPORTE DE KARDEX\", 40, 130);\n\n  doc.setFont(\"Helvetica\", \"normal\");\n  doc.setFontSize(10);\n\n  doc.text(\n    `Fecha generaciÃ³n: ${format(new Date(), \"dd/MM/yyyy HH:mm\", { locale: es })}`,\n    40,\n    150\n  );\n\n  if (product)\n    doc.text(`Producto: ${product.name}`, 40, 165);\n\n  if (branch)\n    doc.text(`Sucursal: ${branch.name}`, 40, 180);\n\n  if (dateStart && dateEnd)\n    doc.text(`Rango: ${dateStart} â†’ ${dateEnd}`, 40, 195);\n\n  doc.text(`Generado por: ${userName}`, 40, 210);\n\n  // =======================================\n  // TABLA â€“ FORMATEO SEGURO\n  // =======================================\n  const tableData = movements.map((m) => [\n    // Fecha\n    format(new Date(m.created_at), \"dd/MM/yyyy HH:mm\", { locale: es }),\n\n    // Movimiento (FIX: evita crash)\n    String(m.movement_type || m.type || \"N/A\").toUpperCase(),\n\n    // Cantidad\n    m.qty ?? 0,\n\n    // Costo Unitario\n    `C$ ${Number(m.cost_unit || 0).toFixed(2)}`,\n\n    // Costo Total\n    `C$ ${Number(m.total_cost || 0).toFixed(2)}`,\n\n    // Sucursales\n    m.from_branch || \"-\",\n    m.to_branch || \"-\",\n\n    // Referencia\n    m.reference || \"-\",\n\n    // Usuario\n    m.user?.full_name || m.user?.email || \"-\",\n  ]);\n\n  autoTable(doc, {\n    startY: 230,\n    head: [\n      [\n        \"Fecha\",\n        \"Movimiento\",\n        \"Cantidad\",\n        \"Costo U.\",\n        \"Total\",\n        \"Origen\",\n        \"Destino\",\n        \"Referencia\",\n        \"Usuario\",\n      ],\n    ],\n    body: tableData,\n    styles: {\n      fontSize: 8,\n      cellPadding: 3,\n    },\n    headStyles: {\n      fillColor: [30, 41, 59], // slate-900\n      textColor: [255, 255, 255],\n      fontSize: 9,\n    },\n    alternateRowStyles: {\n      fillColor: [245, 245, 245],\n    },\n  });\n\n  // =======================================\n  // TOTALES â€“ CÃ¡lculo robusto\n  // =======================================\n  const totals = movements.reduce(\n    (acc, m) => {\n      const qty = Number(m.qty || 0);\n      const totalCost = Number(m.total_cost || 0);\n\n      const type = m.movement_type || m.type;\n\n      if (type === \"entrada\") {\n        acc.entradas += qty;\n        acc.costoEntradas += totalCost;\n      }\n      if (type === \"salida\") {\n        acc.salidas += qty;\n        acc.costoSalidas += totalCost;\n      }\n\n      return acc;\n    },\n    {\n      entradas: 0,\n      salidas: 0,\n      costoEntradas: 0,\n      costoSalidas: 0,\n    }\n  );\n\n  const finalY = doc.lastAutoTable.finalY + 30;\n\n  doc.setFont(\"Helvetica\", \"bold\");\n  doc.setFontSize(11);\n  doc.text(\"Totales del periodo:\", 40, finalY);\n\n  doc.setFont(\"Helvetica\", \"normal\");\n  doc.text(`Entradas: ${totals.entradas}`, 40, finalY + 20);\n  doc.text(`Salidas: ${totals.salidas}`, 40, finalY + 40);\n  doc.text(\n    `Balance: ${totals.entradas - totals.salidas}`,\n    40,\n    finalY + 60\n  );\n\n  doc.text(\n    `Costo total entradas: C$ ${totals.costoEntradas.toFixed(2)}`,\n    250,\n    finalY + 20\n  );\n\n  doc.text(\n    `Costo total salidas: C$ ${totals.costoSalidas.toFixed(2)}`,\n    250,\n    finalY + 40\n  );\n\n  // =======================================\n  // GUARDAR PDF\n  // =======================================\n  doc.save(\n    `Kardex_${product?.name || \"todos\"}_${format(new Date(), \"yyyyMMdd\")}.pdf`\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 672, "column": 0}, "map": {"version":3,"sources":["file:///Users/percyscastillo/Desktop/proyectos%20coding/agro-erp-production-2/src/modules/kardex/utils/exportKardexExcel.js"],"sourcesContent":["// ====================================\n//  exportKardexExcel.js (COMPLETO)\n//  Kardex ERP â€“ Export Excel CORRECTO\n// ====================================\n\nimport * as XLSX from \"xlsx\";\nimport { format } from \"date-fns\";\nimport { es } from \"date-fns/locale\";\n\nexport function exportKardexExcel({\n  org,\n  product,\n  branch,\n  movements,\n  dateStart,\n  dateEnd,\n}) {\n  if (!movements || movements.length === 0) {\n    alert(\"No hay datos para exportar.\");\n    return;\n  }\n\n  // ==============================================\n  // MAPEO CORRECTO DE CAMPOS (TU ESTRUCTURA REAL)\n  // ==============================================\n  const rows = movements.map((m) => ({\n    Fecha: format(new Date(m.created_at), \"dd/MM/yyyy HH:mm\", { locale: es }),\n\n    Movimiento: String(m.movement_type || m.type || \"N/A\").toUpperCase(),\n\n    Cantidad: Number(m.qty || 0),\n\n    \"Costo Unitario\": Number(m.cost_unit || 0),\n\n    \"Costo Total\": Number(m.total_cost || 0),\n\n    \"Sucursal Origen\": m.from_branch || \"-\",\n\n    \"Sucursal Destino\": m.to_branch || \"-\",\n\n    Referencia: m.reference || \"-\",\n\n    Usuario: m.user?.full_name || m.user?.email || \"-\",\n  }));\n\n  // ==============================================\n  // CREAR HOJA\n  // ==============================================\n  const worksheet = XLSX.utils.json_to_sheet(rows);\n\n  // Auto tamaÃ±o de columnas\n  const colWidths = Object.keys(rows[0]).map((key) => ({\n    wch: Math.max(key.length + 5, 15),\n  }));\n\n  worksheet[\"!cols\"] = colWidths;\n\n  // ==============================================\n  // CREAR LIBRO\n  // ==============================================\n  const workbook = XLSX.utils.book_new();\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Kardex\");\n\n  // ==============================================\n  // NOMBRE ARCHIVO\n  // ==============================================\n  const fileName =\n    `Kardex_${product?.name || \"Todos\"}_${Date.now()}.xlsx`;\n\n  XLSX.writeFile(workbook, fileName);\n}\n"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,mCAAmC;AACnC,sCAAsC;AACtC,uCAAuC;;;;;AAEvC;AACA;AACA;;;;AAEO,SAAS,kBAAkB,EAChC,GAAG,EACH,OAAO,EACP,MAAM,EACN,SAAS,EACT,SAAS,EACT,OAAO,EACR;IACC,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG;QACxC,MAAM;QACN;IACF;IAEA,iDAAiD;IACjD,gDAAgD;IAChD,iDAAiD;IACjD,MAAM,OAAO,UAAU,GAAG,CAAC,CAAC,IAAM,CAAC;YACjC,OAAO,IAAA,oOAAM,EAAC,IAAI,KAAK,EAAE,UAAU,GAAG,oBAAoB;gBAAE,QAAQ,sNAAE;YAAC;YAEvE,YAAY,OAAO,EAAE,aAAa,IAAI,EAAE,IAAI,IAAI,OAAO,WAAW;YAElE,UAAU,OAAO,EAAE,GAAG,IAAI;YAE1B,kBAAkB,OAAO,EAAE,SAAS,IAAI;YAExC,eAAe,OAAO,EAAE,UAAU,IAAI;YAEtC,mBAAmB,EAAE,WAAW,IAAI;YAEpC,oBAAoB,EAAE,SAAS,IAAI;YAEnC,YAAY,EAAE,SAAS,IAAI;YAE3B,SAAS,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,SAAS;QACjD,CAAC;IAED,iDAAiD;IACjD,aAAa;IACb,iDAAiD;IACjD,MAAM,YAAY,2MAAU,CAAC,aAAa,CAAC;IAE3C,0BAA0B;IAC1B,MAAM,YAAY,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,MAAQ,CAAC;YACnD,KAAK,KAAK,GAAG,CAAC,IAAI,MAAM,GAAG,GAAG;QAChC,CAAC;IAED,SAAS,CAAC,QAAQ,GAAG;IAErB,iDAAiD;IACjD,cAAc;IACd,iDAAiD;IACjD,MAAM,WAAW,2MAAU,CAAC,QAAQ;IACpC,2MAAU,CAAC,iBAAiB,CAAC,UAAU,WAAW;IAElD,iDAAiD;IACjD,iBAAiB;IACjB,iDAAiD;IACjD,MAAM,WACJ,CAAC,OAAO,EAAE,SAAS,QAAQ,QAAQ,CAAC,EAAE,KAAK,GAAG,GAAG,KAAK,CAAC;IAEzD,+MAAc,CAAC,UAAU;AAC3B"}},
    {"offset": {"line": 734, "column": 0}, "map": {"version":3,"sources":["file:///Users/percyscastillo/Desktop/proyectos%20coding/agro-erp-production-2/src/modules/inventory/components/InventoryEntryModal.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\n\nexport default function InventoryEntryModal({\n  isOpen,\n  onClose,\n  product,\n  onSubmit,\n}) {\n  const [qty, setQty] = useState(\"\");\n  const [cost, setCost] = useState(\"\");\n  const [expiresAt, setExpiresAt] = useState(\"\");\n  const [lot, setLot] = useState(\"\");\n  const [note, setNote] = useState(\"\");\n\n  useEffect(() => {\n    if (product) {\n      setQty(\"\");\n      setCost(product.cost ? String(product.cost) : \"\");\n      setExpiresAt(product.expiresAt ?? \"\");\n      setLot(product.lot ?? \"\");\n      setNote(\"\");\n    }\n  }, [product]);\n\n  if (!isOpen || !product) return null;\n\n  const handleSave = () => {\n    const numericQty = Number(qty);\n    if (!qty || isNaN(numericQty) || numericQty <= 0) {\n      alert(\"Ingrese una cantidad vÃ¡lida mayor a 0\");\n      return;\n    }\n\n    onSubmit({\n      productId: product.productId || product.id,\n      qty: numericQty,\n      cost: cost ? Number(cost) : product.cost,\n      expiresAt,\n      lot,\n      note,\n    });\n\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\n      <div className=\"bg-white w-full max-w-md rounded-xl p-5 shadow-lg\">\n        <h2 className=\"text-lg font-semibold text-slate-800 mb-3\">\n          Entrada de inventario â€” {product.name}\n        </h2>\n\n        <p className=\"text-xs text-slate-500 mb-4\">\n          Sucursal: <span className=\"font-medium\">{product.branch}</span>\n        </p>\n\n        <div className=\"space-y-4 text-sm\">\n          <div>\n            <label className=\"block text-slate-600 font-medium mb-1\">\n              Cantidad a ingresar\n            </label>\n            <input\n              type=\"number\"\n              value={qty}\n              onChange={(e) => setQty(e.target.value)}\n              className=\"w-full border rounded px-3 py-2 text-sm\"\n              placeholder=\"Ej: 100\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-slate-600 font-medium mb-1\">\n              Costo unitario (opcional)\n            </label>\n            <input\n              type=\"number\"\n              value={cost}\n              onChange={(e) => setCost(e.target.value)}\n              className=\"w-full border rounded px-3 py-2 text-sm\"\n              placeholder=\"Ej: 25.50\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-slate-600 font-medium mb-1\">\n              Fecha de vencimiento (opcional)\n            </label>\n            <input\n              type=\"date\"\n              value={expiresAt}\n              onChange={(e) => setExpiresAt(e.target.value)}\n              className=\"w-full border rounded px-3 py-2 text-sm\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-slate-600 font-medium mb-1\">\n              Lote (opcional)\n            </label>\n            <input\n              type=\"text\"\n              value={lot}\n              onChange={(e) => setLot(e.target.value)}\n              className=\"w-full border rounded px-3 py-2 text-sm\"\n              placeholder=\"Ej: LOTE-2024-001\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-slate-600 font-medium mb-1\">\n              Nota (opcional)\n            </label>\n            <textarea\n              value={note}\n              onChange={(e) => setNote(e.target.value)}\n              rows={2}\n              className=\"w-full border rounded px-3 py-2 text-sm\"\n              placeholder=\"Ej: compra nueva, ajuste, proveedor X\"\n            />\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-2 mt-5\">\n          <button\n            onClick={onClose}\n            className=\"px-3 py-2 bg-slate-200 rounded text-xs hover:bg-slate-300\"\n          >\n            Cancelar\n          </button>\n\n          <button\n            onClick={handleSave}\n            className=\"px-3 py-2 bg-emerald-600 text-white rounded text-xs hover:bg-emerald-700\"\n          >\n            Guardar entrada\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIe,SAAS,oBAAoB,EAC1C,MAAM,EACN,OAAO,EACP,OAAO,EACP,QAAQ,EACT;;IACC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,2OAAQ,EAAC;IAC/B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2OAAQ,EAAC;IACjC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2OAAQ,EAAC;IAC3C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,2OAAQ,EAAC;IAC/B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2OAAQ,EAAC;IAEjC,IAAA,4OAAS;yCAAC;YACR,IAAI,SAAS;gBACX,OAAO;gBACP,QAAQ,QAAQ,IAAI,GAAG,OAAO,QAAQ,IAAI,IAAI;gBAC9C,aAAa,QAAQ,SAAS,IAAI;gBAClC,OAAO,QAAQ,GAAG,IAAI;gBACtB,QAAQ;YACV;QACF;wCAAG;QAAC;KAAQ;IAEZ,IAAI,CAAC,UAAU,CAAC,SAAS,OAAO;IAEhC,MAAM,aAAa;QACjB,MAAM,aAAa,OAAO;QAC1B,IAAI,CAAC,OAAO,MAAM,eAAe,cAAc,GAAG;YAChD,MAAM;YACN;QACF;QAEA,SAAS;YACP,WAAW,QAAQ,SAAS,IAAI,QAAQ,EAAE;YAC1C,KAAK;YACL,MAAM,OAAO,OAAO,QAAQ,QAAQ,IAAI;YACxC;YACA;YACA;QACF;QAEA;IACF;IAEA,qBACE,+PAAC;QAAI,WAAU;kBACb,cAAA,+PAAC;YAAI,WAAU;;8BACb,+PAAC;oBAAG,WAAU;;wBAA4C;wBAC/B,QAAQ,IAAI;;;;;;;8BAGvC,+PAAC;oBAAE,WAAU;;wBAA8B;sCAC/B,+PAAC;4BAAK,WAAU;sCAAe,QAAQ,MAAM;;;;;;;;;;;;8BAGzD,+PAAC;oBAAI,WAAU;;sCACb,+PAAC;;8CACC,+PAAC;oCAAM,WAAU;8CAAwC;;;;;;8CAGzD,+PAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,OAAO,EAAE,MAAM,CAAC,KAAK;oCACtC,WAAU;oCACV,aAAY;;;;;;;;;;;;sCAIhB,+PAAC;;8CACC,+PAAC;oCAAM,WAAU;8CAAwC;;;;;;8CAGzD,+PAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,WAAU;oCACV,aAAY;;;;;;;;;;;;sCAIhB,+PAAC;;8CACC,+PAAC;oCAAM,WAAU;8CAAwC;;;;;;8CAGzD,+PAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;oCAC5C,WAAU;;;;;;;;;;;;sCAId,+PAAC;;8CACC,+PAAC;oCAAM,WAAU;8CAAwC;;;;;;8CAGzD,+PAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,OAAO,EAAE,MAAM,CAAC,KAAK;oCACtC,WAAU;oCACV,aAAY;;;;;;;;;;;;sCAIhB,+PAAC;;8CACC,+PAAC;oCAAM,WAAU;8CAAwC;;;;;;8CAGzD,+PAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,MAAM;oCACN,WAAU;oCACV,aAAY;;;;;;;;;;;;;;;;;;8BAKlB,+PAAC;oBAAI,WAAU;;sCACb,+PAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAID,+PAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GA1IwB;KAAA"}},
    {"offset": {"line": 1008, "column": 0}, "map": {"version":3,"sources":["file:///Users/percyscastillo/Desktop/proyectos%20coding/agro-erp-production-2/src/modules/inventory/components/InventoryExitModal.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\n\nexport default function InventoryExitModal({\n  isOpen,\n  onClose,\n  product,\n  onSubmit,\n}) {\n  const [qty, setQty] = useState(\"\");\n  const [reason, setReason] = useState(\"Ajuste\");\n  const [note, setNote] = useState(\"\");\n\n  useEffect(() => {\n    if (product) {\n      setQty(\"\");\n      setReason(\"Ajuste\");\n      setNote(\"\");\n    }\n  }, [product]);\n\n  if (!isOpen || !product) return null;\n\n  const handleSave = () => {\n    const numericQty = Number(qty);\n    if (!qty || isNaN(numericQty) || numericQty <= 0) {\n      alert(\"La cantidad debe ser mayor a 0\");\n      return;\n    }\n\n    if (numericQty > product.stock) {\n      alert(\"No puedes sacar mÃ¡s unidades de las que hay en inventario.\");\n      return;\n    }\n\n    onSubmit({\n      productId: product.productId || product.id,\n      qty: numericQty,\n      reason,\n      note,\n    });\n\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\n      <div className=\"bg-white w-full max-w-md rounded-xl p-5 shadow-lg\">\n        <h2 className=\"text-lg font-semibold text-slate-800 mb-3\">\n          Salida de inventario â€” {product.name}\n        </h2>\n\n        <p className=\"text-xs text-slate-500 mb-4\">\n          Sucursal: <span className=\"font-medium\">{product.branch}</span>\n        </p>\n\n        <div className=\"space-y-4 text-sm\">\n          <div>\n            <label className=\"block text-slate-600 font-medium mb-1\">\n              Cantidad a descontar\n            </label>\n            <input\n              type=\"number\"\n              value={qty}\n              onChange={(e) => setQty(e.target.value)}\n              className=\"w-full border rounded px-3 py-2 text-sm\"\n              placeholder=\"Ej: 10\"\n            />\n            <p className=\"text-[11px] text-slate-500 mt-1\">\n              Stock disponible: {product.stock}\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-slate-600 font-medium mb-1\">\n              Motivo\n            </label>\n            <select\n              value={reason}\n              onChange={(e) => setReason(e.target.value)}\n              className=\"w-full border rounded px-3 py-2 text-sm\"\n            >\n              <option>Ajuste</option>\n              <option>Merma</option>\n              <option>Vencido</option>\n              <option>DaÃ±o en almacenamiento</option>\n              <option>Robo / PÃ©rdida</option>\n              <option>Salida manual</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-slate-600 font-medium mb-1\">\n              Nota (opcional)\n            </label>\n            <textarea\n              value={note}\n              onChange={(e) => setNote(e.target.value)}\n              rows={2}\n              className=\"w-full border rounded px-3 py-2 text-sm\"\n              placeholder=\"Ej: bolsas rotas, producto en mal estado...\"\n            />\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-2 mt-5\">\n          <button\n            onClick={onClose}\n            className=\"px-3 py-2 bg-slate-200 rounded text-xs hover:bg-slate-300\"\n          >\n            Cancelar\n          </button>\n\n          <button\n            onClick={handleSave}\n            className=\"px-3 py-2 bg-red-600 text-white rounded text-xs hover:bg-red-700\"\n          >\n            Registrar salida\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIe,SAAS,mBAAmB,EACzC,MAAM,EACN,OAAO,EACP,OAAO,EACP,QAAQ,EACT;;IACC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,2OAAQ,EAAC;IAC/B,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,2OAAQ,EAAC;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2OAAQ,EAAC;IAEjC,IAAA,4OAAS;wCAAC;YACR,IAAI,SAAS;gBACX,OAAO;gBACP,UAAU;gBACV,QAAQ;YACV;QACF;uCAAG;QAAC;KAAQ;IAEZ,IAAI,CAAC,UAAU,CAAC,SAAS,OAAO;IAEhC,MAAM,aAAa;QACjB,MAAM,aAAa,OAAO;QAC1B,IAAI,CAAC,OAAO,MAAM,eAAe,cAAc,GAAG;YAChD,MAAM;YACN;QACF;QAEA,IAAI,aAAa,QAAQ,KAAK,EAAE;YAC9B,MAAM;YACN;QACF;QAEA,SAAS;YACP,WAAW,QAAQ,SAAS,IAAI,QAAQ,EAAE;YAC1C,KAAK;YACL;YACA;QACF;QAEA;IACF;IAEA,qBACE,+PAAC;QAAI,WAAU;kBACb,cAAA,+PAAC;YAAI,WAAU;;8BACb,+PAAC;oBAAG,WAAU;;wBAA4C;wBAChC,QAAQ,IAAI;;;;;;;8BAGtC,+PAAC;oBAAE,WAAU;;wBAA8B;sCAC/B,+PAAC;4BAAK,WAAU;sCAAe,QAAQ,MAAM;;;;;;;;;;;;8BAGzD,+PAAC;oBAAI,WAAU;;sCACb,+PAAC;;8CACC,+PAAC;oCAAM,WAAU;8CAAwC;;;;;;8CAGzD,+PAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,OAAO,EAAE,MAAM,CAAC,KAAK;oCACtC,WAAU;oCACV,aAAY;;;;;;8CAEd,+PAAC;oCAAE,WAAU;;wCAAkC;wCAC1B,QAAQ,KAAK;;;;;;;;;;;;;sCAIpC,+PAAC;;8CACC,+PAAC;oCAAM,WAAU;8CAAwC;;;;;;8CAGzD,+PAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;oCACzC,WAAU;;sDAEV,+PAAC;sDAAO;;;;;;sDACR,+PAAC;sDAAO;;;;;;sDACR,+PAAC;sDAAO;;;;;;sDACR,+PAAC;sDAAO;;;;;;sDACR,+PAAC;sDAAO;;;;;;sDACR,+PAAC;sDAAO;;;;;;;;;;;;;;;;;;sCAIZ,+PAAC;;8CACC,+PAAC;oCAAM,WAAU;8CAAwC;;;;;;8CAGzD,+PAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,MAAM;oCACN,WAAU;oCACV,aAAY;;;;;;;;;;;;;;;;;;8BAKlB,+PAAC;oBAAI,WAAU;;sCACb,+PAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAID,+PAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GAxHwB;KAAA"}},
    {"offset": {"line": 1280, "column": 0}, "map": {"version":3,"sources":["file:///Users/percyscastillo/Desktop/proyectos%20coding/agro-erp-production-2/src/modules/inventory/components/InventoryTransferModal.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\n\nexport default function InventoryTransferModal({\n  isOpen,\n  onClose,\n  product,\n  onSubmit,\n  branches = [],\n}) {\n  const [qty, setQty] = useState(\"\");\n  const [from, setFrom] = useState(\"\");\n  const [to, setTo] = useState(\"\");\n  const [fromBranchId, setFromBranchId] = useState(\"\");\n  const [toBranchId, setToBranchId] = useState(\"\");\n\n  useEffect(() => {\n    if (product) {\n      setQty(\"\");\n      setFrom(product.branch);\n      setFromBranchId(product.branchId || \"\");\n      setTo(\"\");\n      setToBranchId(\"\");\n    }\n  }, [product]);\n\n  if (!isOpen || !product) return null;\n\n  const handleSubmit = () => {\n    const numericQty = Number(qty);\n    if (!qty || isNaN(numericQty) || numericQty <= 0) return alert(\"La cantidad debe ser mayor a 0.\");\n    if (numericQty > product.stock) return alert(\"No hay suficiente stock disponible.\");\n    if (!to) return alert(\"Selecciona una bodega destino.\");\n    if (from === to) return alert(\"La bodega destino debe ser diferente a la origen.\");\n\n    onSubmit({\n      productId: product.productId || product.id,\n      qty: numericQty,\n      from,\n      to,\n      fromBranchId,\n      toBranchId,\n    });\n\n    onClose();\n  };\n\n  const handleToChange = (e) => {\n    const selectedName = e.target.value;\n    setTo(selectedName);\n    const branch = branches.find(b => b.name === selectedName);\n    setToBranchId(branch?.id || \"\");\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/40 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-xl p-5 w-[380px] space-y-4 shadow-xl\">\n\n        <h2 className=\"text-lg font-semibold text-slate-800\">\n          Traslado de inventario\n        </h2>\n\n        <p className=\"text-sm text-slate-600\">\n          Producto: <span className=\"font-semibold\">{product.name}</span>\n        </p>\n\n        {/* Cantidad */}\n        <div className=\"space-y-1\">\n          <label className=\"text-xs font-medium text-slate-600\">\n            Cantidad a trasladar\n          </label>\n          <input\n            type=\"number\"\n            value={qty}\n            onChange={(e) => setQty(e.target.value)}\n            className=\"w-full border rounded px-3 py-2 text-sm\"\n            placeholder=\"Ej: 10\"\n          />\n        </div>\n\n        {/* Origen */}\n        <div className=\"space-y-1\">\n          <label className=\"text-xs font-medium text-slate-600\">\n            Bodega origen\n          </label>\n          <input\n            type=\"text\"\n            value={from}\n            readOnly\n            className=\"w-full border rounded px-3 py-2 text-sm bg-slate-100\"\n          />\n        </div>\n\n        {/* Destino */}\n        <div className=\"space-y-1\">\n          <label className=\"text-xs font-medium text-slate-600\">\n            Bodega destino\n          </label>\n          <select\n            value={to}\n            onChange={handleToChange}\n            className=\"w-full border rounded px-3 py-2 text-sm bg-white\"\n          >\n            <option value=\"\">Seleccionar...</option>\n            {branches.filter((b) => b.name !== from).map((b) => (\n              <option key={b.id} value={b.name}>\n                {b.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Botones */}\n        <div className=\"flex justify-end gap-2 pt-2\">\n          <button\n            onClick={onClose}\n            className=\"px-3 py-1.5 text-sm bg-slate-200 rounded hover:bg-slate-300\"\n          >\n            Cancelar\n          </button>\n          <button\n            onClick={handleSubmit}\n            className=\"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700\"\n          >\n            Transferir\n          </button>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIe,SAAS,uBAAuB,EAC7C,MAAM,EACN,OAAO,EACP,OAAO,EACP,QAAQ,EACR,WAAW,EAAE,EACd;;IACC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,2OAAQ,EAAC;IAC/B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2OAAQ,EAAC;IACjC,MAAM,CAAC,IAAI,MAAM,GAAG,IAAA,2OAAQ,EAAC;IAC7B,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,2OAAQ,EAAC;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,2OAAQ,EAAC;IAE7C,IAAA,4OAAS;4CAAC;YACR,IAAI,SAAS;gBACX,OAAO;gBACP,QAAQ,QAAQ,MAAM;gBACtB,gBAAgB,QAAQ,QAAQ,IAAI;gBACpC,MAAM;gBACN,cAAc;YAChB;QACF;2CAAG;QAAC;KAAQ;IAEZ,IAAI,CAAC,UAAU,CAAC,SAAS,OAAO;IAEhC,MAAM,eAAe;QACnB,MAAM,aAAa,OAAO;QAC1B,IAAI,CAAC,OAAO,MAAM,eAAe,cAAc,GAAG,OAAO,MAAM;QAC/D,IAAI,aAAa,QAAQ,KAAK,EAAE,OAAO,MAAM;QAC7C,IAAI,CAAC,IAAI,OAAO,MAAM;QACtB,IAAI,SAAS,IAAI,OAAO,MAAM;QAE9B,SAAS;YACP,WAAW,QAAQ,SAAS,IAAI,QAAQ,EAAE;YAC1C,KAAK;YACL;YACA;YACA;YACA;QACF;QAEA;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,MAAM,eAAe,EAAE,MAAM,CAAC,KAAK;QACnC,MAAM;QACN,MAAM,SAAS,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK;QAC7C,cAAc,QAAQ,MAAM;IAC9B;IAEA,qBACE,+PAAC;QAAI,WAAU;kBACb,cAAA,+PAAC;YAAI,WAAU;;8BAEb,+PAAC;oBAAG,WAAU;8BAAuC;;;;;;8BAIrD,+PAAC;oBAAE,WAAU;;wBAAyB;sCAC1B,+PAAC;4BAAK,WAAU;sCAAiB,QAAQ,IAAI;;;;;;;;;;;;8BAIzD,+PAAC;oBAAI,WAAU;;sCACb,+PAAC;4BAAM,WAAU;sCAAqC;;;;;;sCAGtD,+PAAC;4BACC,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,OAAO,EAAE,MAAM,CAAC,KAAK;4BACtC,WAAU;4BACV,aAAY;;;;;;;;;;;;8BAKhB,+PAAC;oBAAI,WAAU;;sCACb,+PAAC;4BAAM,WAAU;sCAAqC;;;;;;sCAGtD,+PAAC;4BACC,MAAK;4BACL,OAAO;4BACP,QAAQ;4BACR,WAAU;;;;;;;;;;;;8BAKd,+PAAC;oBAAI,WAAU;;sCACb,+PAAC;4BAAM,WAAU;sCAAqC;;;;;;sCAGtD,+PAAC;4BACC,OAAO;4BACP,UAAU;4BACV,WAAU;;8CAEV,+PAAC;oCAAO,OAAM;8CAAG;;;;;;gCAChB,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,MAAM,GAAG,CAAC,CAAC,kBAC5C,+PAAC;wCAAkB,OAAO,EAAE,IAAI;kDAC7B,EAAE,IAAI;uCADI,EAAE,EAAE;;;;;;;;;;;;;;;;;8BAQvB,+PAAC;oBAAI,WAAU;;sCACb,+PAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,+PAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAQX;GAhIwB;KAAA"}},
    {"offset": {"line": 1513, "column": 0}, "map": {"version":3,"sources":["file:///Users/percyscastillo/Desktop/proyectos%20coding/agro-erp-production-2/src/modules/kardex/kardexScreen.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport KardexTable from \"./kardexTable\";\nimport { exportKardexPDF } from \"./utils/exportKardexPDF\";\nimport { exportKardexExcel } from \"./utils/exportKardexExcel\";\n\nimport InventoryEntryModal from \"../inventory/components/InventoryEntryModal\";\nimport InventoryExitModal from \"../inventory/components/InventoryExitModal\";\nimport InventoryTransferModal from \"../inventory/components/InventoryTransferModal\";\n\nexport default function KardexScreen({ orgSlug }) {\n  const [loading, setLoading] = useState(false);\n  const [movements, setMovements] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [branches, setBranches] = useState([]);\n\n  const [selectedProduct, setSelectedProduct] = useState(\"all\");\n  const [selectedBranch, setSelectedBranch] = useState(\"all\");\n  const [movementType, setMovementType] = useState(\"all\");\n  const [search, setSearch] = useState(\"\");\n\n  const [dateStart, setDateStart] = useState(\"\");\n  const [dateEnd, setDateEnd] = useState(\"\");\n\n  const [page, setPage] = useState(0);\n  const limit = 50;\n\n  const [error, setError] = useState(null);\n\n  const [entryOpen, setEntryOpen] = useState(false);\n  const [exitOpen, setExitOpen] = useState(false);\n  const [transferOpen, setTransferOpen] = useState(false);\n\n  // =======================================================\n  // CARGAR PRODUCTOS Y SUCURSALES\n  // =======================================================\n  useEffect(() => {\n    async function loadFilters() {\n      try {\n        const [prodRes, branchRes] = await Promise.all([\n          fetch(\"/api/products\", { headers: { \"x-org-slug\": orgSlug } }),\n          fetch(\"/api/branches\", { headers: { \"x-org-slug\": orgSlug } }),\n        ]);\n\n        if (prodRes.ok) {\n          const prodData = await prodRes.json();\n          setProducts(prodData.products || []);\n        }\n        if (branchRes.ok) {\n          const branchData = await branchRes.json();\n          setBranches(branchData.branches || []);\n        }\n      } catch (err) {\n        console.error(\"Error loading filters:\", err);\n      }\n    }\n\n    if (orgSlug) loadFilters();\n  }, [orgSlug]);\n\n  // =======================================================\n  // CARGAR KARDEX\n  // =======================================================\n  async function loadKardex() {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const params = new URLSearchParams({\n        limit,\n        offset: page * limit,\n      });\n\n      if (dateStart) params.append(\"startDate\", dateStart);\n      if (dateEnd) params.append(\"endDate\", dateEnd);\n\n      const res = await fetch(`/api/kardex?${params.toString()}`, {\n        headers: {\n          \"x-org-slug\": orgSlug,\n          \"x-product-id\": selectedProduct,\n          \"x-branch-id\": selectedBranch,\n          \"x-movement-type\": movementType,\n          \"x-search\": search,\n        },\n      });\n\n      const json = await res.json();\n\n      if (!json.success) throw new Error(json.error || \"Error cargando Kardex\");\n\n      setMovements(json.data);\n    } catch (err) {\n      console.error(err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    if (orgSlug) loadKardex();\n  }, [\n    orgSlug,\n    selectedProduct,\n    selectedBranch,\n    movementType,\n    search,\n    dateStart,\n    dateEnd,\n    page,\n  ]);\n\n  // =======================================================\n  // EXPORTAR PDF\n  // =======================================================\n  function handlePrint() {\n    const org = {\n      name: \"AgroCentro Nica\",\n      ruc: \"401-010200-1002D\",\n      address: \"Masatepe, Nicaragua\",\n      phone: \"8888-8888\",\n    };\n\n    exportKardexPDF({\n      org,\n      product:\n        selectedProduct !== \"all\"\n          ? products.find((p) => p.id === selectedProduct)\n          : null,\n      branch:\n        selectedBranch !== \"all\"\n          ? branches.find((b) => b.id === selectedBranch)\n          : null,\n      movements,\n      dateStart,\n      dateEnd,\n      userName: \"Administrador\",\n    });\n  }\n\n  // =======================================================\n  // EXPORTAR EXCEL\n  // =======================================================\n  function handleExportExcel() {\n    const org = {\n      name: \"AgroCentro Nica\",\n      ruc: \"401-010200-1002D\",\n    };\n\n    exportKardexExcel({\n      org,\n      product:\n        selectedProduct !== \"all\"\n          ? products.find((p) => p.id === selectedProduct)\n          : null,\n      branch:\n        selectedBranch !== \"all\"\n          ? branches.find((b) => b.id === selectedBranch)\n          : null,\n      movements,\n      dateStart,\n      dateEnd,\n    });\n  }\n\n  // =======================================================\n  // SOLO REQUIERE PRODUCTO SELECCIONADO\n  // =======================================================\n  const canMakeMovement = selectedProduct !== \"all\";\n\n  const getSelectedProductData = () => {\n    if (selectedProduct === \"all\") return null;\n    const prod = products.find((p) => p.id === selectedProduct);\n    if (!prod) return null;\n\n    return {\n      id: prod.id,\n      productId: prod.id,\n      name: prod.name,\n      stock: 0,\n      cost: 0,\n      price: 0,\n      branchId: selectedBranch === \"all\" ? null : selectedBranch,\n    };\n  };\n\n  // =======================================================\n  // MANEJO DE MOVIMIENTOS\n  // =======================================================\n  const handleEntrySubmit = async (data) => {\n    try {\n      const res = await fetch(\"/api/inventory/movements\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-org-slug\": orgSlug,\n        },\n        body: JSON.stringify({\n          productId: data.productId,\n          type: \"entrada\",\n          qty: data.qty,\n          cost: data.cost,\n          notes: data.note || \"Entrada desde Kardex\",\n          to_branch: selectedBranch === \"all\" ? null : selectedBranch,\n        }),\n      });\n\n      if (!res.ok) {\n        const err = await res.json();\n        alert(err.error || \"Error registrando entrada\");\n        return;\n      }\n\n      await loadKardex();\n      setEntryOpen(false);\n    } catch (err) {\n      console.error(err);\n      alert(\"Error registrando entrada\");\n    }\n  };\n\n  const handleExitSubmit = async (data) => {\n    try {\n      const res = await fetch(\"/api/inventory/movements\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-org-slug\": orgSlug,\n        },\n        body: JSON.stringify({\n          productId: data.productId,\n          type: \"salida\",\n          qty: data.qty,\n          notes: data.note || \"Salida desde Kardex\",\n          from_branch: selectedBranch === \"all\" ? null : selectedBranch,\n        }),\n      });\n\n      if (!res.ok) {\n        const err = await res.json();\n        alert(err.error || \"Error registrando salida\");\n        return;\n      }\n\n      await loadKardex();\n      setExitOpen(false);\n    } catch (err) {\n      console.error(err);\n      alert(\"Error registrando salida\");\n    }\n  };\n\n  const handleTransferSubmit = async ({\n    productId,\n    qty,\n    fromBranchId,\n    toBranchId,\n  }) => {\n    try {\n      const res = await fetch(\"/api/inventory/movements\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-org-slug\": orgSlug,\n        },\n        body: JSON.stringify({\n          productId,\n          type: \"transferencia\",\n          qty,\n          from_branch:\n            fromBranchId || (selectedBranch === \"all\" ? null : selectedBranch),\n          to_branch: toBranchId,\n          notes: \"Traslado desde Kardex\",\n        }),\n      });\n\n      if (!res.ok) {\n        const err = await res.json();\n        alert(err.error || \"Error registrando traslado\");\n        return;\n      }\n\n      await loadKardex();\n      setTransferOpen(false);\n    } catch (err) {\n      console.error(err);\n      alert(\"Error registrando traslado\");\n    }\n  };\n\n  // =======================================================\n  // UI RENDER\n  // =======================================================\n  return (\n    <div className=\"space-y-6\">\n\n      {/* BOTONES */}\n      <div className=\"flex flex-wrap items-center gap-3 p-4 bg-white border rounded-xl shadow-sm\">\n        <span className=\"text-sm font-semibold text-slate-700\">\n          Movimientos:\n        </span>\n\n        <button\n          onClick={() => setEntryOpen(true)}\n          disabled={!canMakeMovement}\n          className={`px-3 py-1.5 text-xs rounded-lg ${\n            canMakeMovement\n              ? \"bg-emerald-600 text-white hover:bg-emerald-700\"\n              : \"bg-slate-200 text-slate-400 cursor-not-allowed\"\n          }`}\n        >\n          + Entrada\n        </button>\n\n        <button\n          onClick={() => setExitOpen(true)}\n          disabled={!canMakeMovement}\n          className={`px-3 py-1.5 text-xs rounded-lg ${\n            canMakeMovement\n              ? \"bg-red-600 text-white hover:bg-red-700\"\n              : \"bg-slate-200 text-slate-400 cursor-not-allowed\"\n          }`}\n        >\n          - Salida\n        </button>\n\n        <button\n          onClick={() => setTransferOpen(true)}\n          disabled={!canMakeMovement}\n          className={`px-3 py-1.5 text-xs rounded-lg ${\n            canMakeMovement\n              ? \"bg-blue-600 text-white hover:bg-blue-700\"\n              : \"bg-slate-200 text-slate-400 cursor-not-allowed\"\n          }`}\n        >\n          Traslado\n        </button>\n      </div>\n\n      {/* SEARCH BAR */}\n      <div className=\"p-4\">\n        <input\n          type=\"text\"\n          placeholder=\"Buscar en Kardex (producto, referencia, usuario)\"\n          value={search}\n          onChange={(e) => {\n            setSearch(e.target.value);\n            setPage(0);\n          }}\n          className=\"w-full p-2 text-xs border rounded-lg\"\n        />\n      </div>\n\n      {/* FILTROS */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 bg-white border rounded-xl shadow-sm\">\n\n        <div>\n          <label className=\"text-xs font-semibold text-slate-600\">\n            Producto\n          </label>\n          <select\n            value={selectedProduct}\n            onChange={(e) => {\n              setSelectedProduct(e.target.value);\n              setPage(0);\n            }}\n            className=\"w-full p-2 text-xs border rounded-lg\"\n          >\n            <option value=\"all\">Todos</option>\n            {products.map((p) => (\n              <option key={p.id} value={p.id}>\n                {p.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div>\n          <label className=\"text-xs font-semibold text-slate-600\">\n            Sucursal\n          </label>\n          <select\n            value={selectedBranch}\n            onChange={(e) => {\n              setSelectedBranch(e.target.value);\n              setPage(0);\n            }}\n            className=\"w-full p-2 text-xs border rounded-lg\"\n          >\n            <option value=\"all\">Todas</option>\n            {branches.map((b) => (\n              <option key={b.id} value={b.id}>\n                {b.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div>\n          <label className=\"text-xs font-semibold text-slate-600\">\n            Movimiento\n          </label>\n          <select\n            value={movementType}\n            onChange={(e) => {\n              setMovementType(e.target.value);\n              setPage(0);\n            }}\n            className=\"w-full p-2 text-xs border rounded-lg\"\n          >\n            <option value=\"all\">Todos</option>\n            <option value=\"entrada\">Entradas</option>\n            <option value=\"salida\">Salidas</option>\n            <option value=\"transferencia\">Transferencias</option>\n            <option value=\"venta\">Ventas</option>\n            <option value=\"ajuste\">Ajustes</option>\n          </select>\n        </div>\n\n        <div>\n          <label className=\"text-xs font-semibold text-slate-600\">Desde</label>\n          <input\n            type=\"date\"\n            value={dateStart}\n            onChange={(e) => {\n              setDateStart(e.target.value);\n              setPage(0);\n            }}\n            className=\"w-full p-2 text-xs border rounded-lg\"\n          />\n\n          <label className=\"text-xs font-semibold text-slate-600 mt-2 block\">\n            Hasta\n          </label>\n          <input\n            type=\"date\"\n            value={dateEnd}\n            onChange={(e) => {\n              setDateEnd(e.target.value);\n              setPage(0);\n            }}\n            className=\"w-full p-2 text-xs border rounded-lg\"\n          />\n        </div>\n      </div>\n\n      {/* TABLA */}\n      {!loading && (\n        <KardexTable\n          data={movements}\n          page={page}\n          setPage={setPage}\n          limit={limit}\n          product={\n            selectedProduct === \"all\"\n              ? null\n              : products.find((p) => p.id === selectedProduct)\n          }\n          onPrint={handlePrint}\n          onExportExcel={handleExportExcel}\n        />\n      )}\n\n      {loading && (\n        <p className=\"text-center text-slate-500 text-sm\">Cargando...</p>\n      )}\n\n      {error && <p className=\"text-center text-red-600 text-sm\">{error}</p>}\n\n      {/* MODALES */}\n      <InventoryEntryModal\n        isOpen={entryOpen}\n        onClose={() => setEntryOpen(false)}\n        product={getSelectedProductData()}\n        onSubmit={handleEntrySubmit}\n      />\n\n      <InventoryExitModal\n        isOpen={exitOpen}\n        onClose={() => setExitOpen(false)}\n        product={getSelectedProductData()}\n        onSubmit={handleExitSubmit}\n      />\n\n      <InventoryTransferModal\n        isOpen={transferOpen}\n        onClose={() => setTransferOpen(false)}\n        product={getSelectedProductData()}\n        onSubmit={handleTransferSubmit}\n        branches={branches}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2160, "column": 0}, "map": {"version":3,"sources":["file:///Users/percyscastillo/Desktop/proyectos%20coding/agro-erp-production-2/app/%5BorgSlug%5D/kardex/page.jsx"],"sourcesContent":["\"use client\";\n\nimport KardexScreen from \"@/src/modules/kardex/kardexScreen\";\nimport { useParams } from \"next/navigation\";\n\nexport default function Page() {\n  const params = useParams();\n  return <KardexScreen orgSlug={params.orgSlug} />;\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,SAAS,IAAA,oNAAS;IACxB,qBAAO,+PAAC,yNAAY;QAAC,SAAS,OAAO,OAAO;;;;;;AAC9C;GAHwB;;QACP,oNAAS;;;KADF"}}]
}